[
 {
  "allow_guest": 0,
  "api_method": "frappe.desk.reportview.get",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": null,
  "enable_rate_limit": 0,
  "event_frequency": null,
  "modified": "2025-07-24 16:17:41.456035",
  "module": null,
  "rate_limit_count": 0,
  "rate_limit_seconds": 0,
  "reference_doctype": "Lead",
  "script": "import frappe\nfrom frappe.utils import cint\n\n@frappe.whitelist()\ndef get(data):\n    user = frappe.session.user\n    roles = frappe.get_roles(user)\n\n    # Only restrict if user is Sales Team and not Administrator\n    if \"Sales Team\" in roles and user != \"Administrator\":\n        if not \"filters\" in data:\n            data[\"filters\"] = []\n\n        data[\"filters\"].append([\"_assign\", \"like\", f\"%{user}%\"])\n\n    # Call the original method\n    return frappe.call(\"frappe.desk.reportview.get\", data)",
  "script_type": "API"
 }
]